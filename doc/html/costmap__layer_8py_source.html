<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>tamu_sa: costmap_layer.py Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="jquery.js"></script>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_2fabe2037a618e5a1d5c926899fc2435.html">tamu_sa</a></li><li class="navelem"><a class="el" href="dir_b3067150839c1c10d6f7009ba5daad75.html">costmap</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">costmap_layer.py</div>  </div>
</div><!--header-->
<div class="contents">
<a href="costmap__layer_8py.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="namespacetamu__sa_1_1costmap_1_1costmap__layer.html">    1</a></span>&#160;<span class="comment">#!/usr/bin/env python</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">import</span> pdb</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="stringliteral">&#39;&#39;&#39;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="stringliteral">{name: numpy array}</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="stringliteral">&#39;&#39;&#39;</span></div><div class="line"><a name="l00009"></a><span class="lineno"><a class="line" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html">    9</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html">CostMap</a>: </div><div class="line"><a name="l00010"></a><span class="lineno"><a class="line" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#af858b6b3cb159213b1d29d6965e6ded2">   10</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#af858b6b3cb159213b1d29d6965e6ded2">__init__</a>(self):    </div><div class="line"><a name="l00011"></a><span class="lineno"><a class="line" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#a88b3eafa4554ad3849472052927e88ea">   11</a></span>&#160;        self.<a class="code" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#a88b3eafa4554ad3849472052927e88ea">layers</a>= {}</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno"><a class="line" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#a180e238585e7354ebf250da160bb0ae5">   13</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#a180e238585e7354ebf250da160bb0ae5">add_layer</a>(self, grid=None, name=&quot;&quot;):</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        <span class="keyword">assert</span>  <span class="keywordflow">not</span> name <span class="keywordflow">in</span> self.<a class="code" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#a88b3eafa4554ad3849472052927e88ea">layers</a>, <span class="stringliteral">&#39;&quot;{}&quot;  ALREADY EXISTS&#39;</span>.format(name)</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;        self.<a class="code" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#a88b3eafa4554ad3849472052927e88ea">layers</a>[name] = grid</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    </div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    <span class="comment"># THIS FUCNTION MAY BE USELESS</span></div><div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#af94171af8125ab6e97fbcc72e7ab7cb0">   18</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#af94171af8125ab6e97fbcc72e7ab7cb0">update_layer</a>(self, grid, name):</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        <span class="keyword">assert</span> name <span class="keywordflow">in</span> self.<a class="code" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#a88b3eafa4554ad3849472052927e88ea">layers</a>, <span class="stringliteral">&#39;&quot;{}&quot; NOT FOUND, ADD IT FIRST&#39;</span>.format(name)</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;        self.<a class="code" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#a88b3eafa4554ad3849472052927e88ea">layers</a>[name] = grid </div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#af4d5fbd9586bf2edadd9a3ec16837bc7">   22</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#af4d5fbd9586bf2edadd9a3ec16837bc7">does_layer_exist</a>(self, name):</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;        <span class="stringliteral">&#39;&#39;&#39; helper function to only add layer once </span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="stringliteral">            name := a tuple or list of names (&#39;name1&#39;, name2&#39;)</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(name,list) <span class="keywordflow">and</span> <span class="keywordflow">not</span> isinstance(name, tuple):</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;            name = [name]</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        <span class="comment">#return name in self.layers</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        <span class="keywordflow">return</span>  all(n <span class="keywordflow">in</span> self.<a class="code" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#a88b3eafa4554ad3849472052927e88ea">layers</a> <span class="keywordflow">for</span> n <span class="keywordflow">in</span> name)</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#a078b1333f8db2cea915bce1de05b256e">   31</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#a078b1333f8db2cea915bce1de05b256e">return_total_map</a>(self):  </div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        <span class="comment"># Convert self.layers to a 3d array</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        array_3d = np.dstack(list(self.<a class="code" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#a88b3eafa4554ad3849472052927e88ea">layers</a>.values()))</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        <span class="keywordflow">return</span> np.sum(array_3d, axis=2)</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#a00436548f2f6a632237b4cebc2dd9f38">   36</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#a00436548f2f6a632237b4cebc2dd9f38">delete_layer</a>(self, name):</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        del self.<a class="code" href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#a88b3eafa4554ad3849472052927e88ea">layers</a>[name]</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        print(<span class="stringliteral">&#39;Deleted &quot;{}&quot;&#39;</span>.format(name))</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;           </div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        </div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;            </div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  </div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        </div><div class="ttc" id="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap_html_a180e238585e7354ebf250da160bb0ae5"><div class="ttname"><a href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#a180e238585e7354ebf250da160bb0ae5">tamu_sa.costmap.costmap_layer.CostMap.add_layer</a></div><div class="ttdeci">def add_layer(self, grid=None, name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="costmap__layer_8py_source.html#l00013">costmap_layer.py:13</a></div></div>
<div class="ttc" id="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap_html_a078b1333f8db2cea915bce1de05b256e"><div class="ttname"><a href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#a078b1333f8db2cea915bce1de05b256e">tamu_sa.costmap.costmap_layer.CostMap.return_total_map</a></div><div class="ttdeci">def return_total_map(self)</div><div class="ttdef"><b>Definition:</b> <a href="costmap__layer_8py_source.html#l00031">costmap_layer.py:31</a></div></div>
<div class="ttc" id="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap_html_a00436548f2f6a632237b4cebc2dd9f38"><div class="ttname"><a href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#a00436548f2f6a632237b4cebc2dd9f38">tamu_sa.costmap.costmap_layer.CostMap.delete_layer</a></div><div class="ttdeci">def delete_layer(self, name)</div><div class="ttdef"><b>Definition:</b> <a href="costmap__layer_8py_source.html#l00036">costmap_layer.py:36</a></div></div>
<div class="ttc" id="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap_html"><div class="ttname"><a href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html">tamu_sa.costmap.costmap_layer.CostMap</a></div><div class="ttdef"><b>Definition:</b> <a href="costmap__layer_8py_source.html#l00009">costmap_layer.py:9</a></div></div>
<div class="ttc" id="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap_html_af858b6b3cb159213b1d29d6965e6ded2"><div class="ttname"><a href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#af858b6b3cb159213b1d29d6965e6ded2">tamu_sa.costmap.costmap_layer.CostMap.__init__</a></div><div class="ttdeci">def __init__(self)</div><div class="ttdef"><b>Definition:</b> <a href="costmap__layer_8py_source.html#l00010">costmap_layer.py:10</a></div></div>
<div class="ttc" id="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap_html_af4d5fbd9586bf2edadd9a3ec16837bc7"><div class="ttname"><a href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#af4d5fbd9586bf2edadd9a3ec16837bc7">tamu_sa.costmap.costmap_layer.CostMap.does_layer_exist</a></div><div class="ttdeci">def does_layer_exist(self, name)</div><div class="ttdef"><b>Definition:</b> <a href="costmap__layer_8py_source.html#l00022">costmap_layer.py:22</a></div></div>
<div class="ttc" id="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap_html_af94171af8125ab6e97fbcc72e7ab7cb0"><div class="ttname"><a href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#af94171af8125ab6e97fbcc72e7ab7cb0">tamu_sa.costmap.costmap_layer.CostMap.update_layer</a></div><div class="ttdeci">def update_layer(self, grid, name)</div><div class="ttdef"><b>Definition:</b> <a href="costmap__layer_8py_source.html#l00018">costmap_layer.py:18</a></div></div>
<div class="ttc" id="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap_html_a88b3eafa4554ad3849472052927e88ea"><div class="ttname"><a href="classtamu__sa_1_1costmap_1_1costmap__layer_1_1CostMap.html#a88b3eafa4554ad3849472052927e88ea">tamu_sa.costmap.costmap_layer.CostMap.layers</a></div><div class="ttdeci">layers</div><div class="ttdef"><b>Definition:</b> <a href="costmap__layer_8py_source.html#l00011">costmap_layer.py:11</a></div></div>
</div><!-- fragment --></div><!-- contents -->

<br clear="all" />
<hr size="1"><div style="align: right;">
<a href="http://wiki.ros.org/tamu_sa">tamu_sa</a><br />
Author(s): </br />
<small>autogenerated on Wed Aug 19 2020 14:36:44</small>
</div>
</body>
</html>
